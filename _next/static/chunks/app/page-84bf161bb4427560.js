(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8877:function(e,t,a){Promise.resolve().then(a.bind(a,6073))},6073:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var s=a(7437),n=a(2265);let i=a(8472).Z.create({baseURL:"https://wayi.league-funny.com/api"}),r=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";return(await i.get("/task",{params:{page:e,type:t}})).data.data},c=async e=>(await i.post("/task",e)).data.data,l=async(e,t)=>(await i.patch("/task/".concat(e),{is_completed:t})).data.data,d=async e=>{await i.delete("/task/".concat(e))};function o(e){let{onTaskAdded:t}=e,[a,i]=(0,n.useState)(""),[r,l]=(0,n.useState)(""),[d,o]=(0,n.useState)(""),m=async e=>{if(e.preventDefault(),""===a||""===r){o("The field is required");return}o("");let s={name:a,description:r,is_completed:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};t(await c(s)),i(""),l("")};return(0,s.jsxs)("form",{onSubmit:m,className:"py-4 max-w-[500px] border-4 mx-auto mb-4 p-4",children:[(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"taskName",children:"任務名稱"}),(0,s.jsx)("input",{type:"text",id:"taskName",value:a,onChange:e=>i(e.target.value),placeholder:"輸入任務名稱",className:"input border-b-2 w-full",maxLength:10})]}),(0,s.jsxs)("div",{className:"mb-2 ",children:[(0,s.jsx)("label",{htmlFor:"taskDescription",children:"描述任務"}),(0,s.jsx)("input",{type:"text",id:"taskDescription",value:r,onChange:e=>l(e.target.value),placeholder:"請描述任務",className:"input border-b-2 w-full",maxLength:30})]}),d&&(0,s.jsx)("div",{className:"text-red-500",children:d}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{type:"submit",className:"btn border p-2",children:"新增任務"})})]})}function m(){let[e,t]=(0,n.useState)([]),[a,i]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{let e=await r();Array.isArray(e)?t(e.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))):console.error("Fetched data is not an array")})()},[]);let m=async a=>{t([await c(a),...e].sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)))},u=async a=>{await d(a),t(e.filter(e=>e.id!==a))},x=async(a,s)=>{await l(a,s),t(e.map(e=>e.id===a?{...e,is_completed:s}:e))};return(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsx)("h1",{className:"text-2xl mb-4 text-cyan-800 font-extrabold text-[40px] py-4 text-center",children:"My ToDo List"}),(0,s.jsx)(o,{onTaskAdded:m}),(0,s.jsx)("div",{className:"mb-4 max-w-[500px] mx-auto",children:(0,s.jsxs)("button",{onClick:()=>i(!a),className:"btn btn-primary border p-2",children:[a?"隱藏":"顯示","完成任務"]})}),(0,s.jsx)("ul",{className:"max-w-[500px] mx-auto",children:e.filter(e=>a||!e.is_completed).map(e=>(0,s.jsxs)("li",{className:"flex justify-between items-center mb-4 p-4 border-b-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:e.name}),(0,s.jsx)("p",{className:"text-gray-500 font-light text-sm",children:new Date(e.updated_at).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"/")})]}),(0,s.jsxs)("div",{className:"grid gap-y-2",children:[(0,s.jsx)("button",{onClick:()=>x(e.id,!e.is_completed),className:"border p-2 btn ".concat(e.is_completed?"btn-warning":"btn-success"),children:e.is_completed?"完成":"未完成"}),(0,s.jsx)("button",{onClick:()=>u(e.id),className:"btn btn-danger border p-2",children:"刪除任務"})]})]},e.id))})]})}}},function(e){e.O(0,[472,971,23,744],function(){return e(e.s=8877)}),_N_E=e.O()}]);